name: Notion-Slack Task Sync

on:
  # schedule:
  #   # 3 AM EST = 8 AM UTC
  #   - cron: '0 8 * * *'
  #   # 9:45 AM EST = 2:45 PM UTC  
  #   - cron: '45 14 * * *'
  workflow_dispatch: # Allow manual trigger only

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Vercel Sync
        run: |
          echo "Triggering sync at $(date)"
          curl -f "https://notion-slack-automation-v3.vercel.app/api/sync" || exit 1
          echo "Sync completed successfully"